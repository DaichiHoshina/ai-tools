---
name: guideline-maintenance
description: ガイドラインメンテナンス - 最新ドキュメントからClaude向け実践的レシピへ変換・更新
---

# ガイドラインメンテナンス（改訂版）

ガイドラインを最新ドキュメントから **Claude が高速に読み込める実践的レシピ** に変換・更新するスキル。

## 発動条件

- 「ガイドライン更新して」
- 「最新バージョンに更新して」
- 「レシピ形式に変換して」

## 対象ファイル

**共通**: `~/.claude/guidelines/common/*.md`
**言語別**: `~/.claude/guidelines/languages/*.md`

## 実行フロー

### 1. 最新情報取得（Context7）

| 言語/FW | リポジトリ | 取得情報 |
|---------|-----------|---------|
| Go | `/golang/go` | 最新バージョン・新機能 |
| TypeScript | `/microsoft/TypeScript` | 最新リリース |
| Next.js | `/vercel/next.js` | 最新機能 |
| React | `/facebook/react` | 最新パターン |

### 2. レシピ化（新フォーマット）

#### 優先形式
1. **クイックリファレンステーブル** - 高速スキャン用
2. **よくあるミステーブル** - ❌/✅比較
3. **箇条書き** - バージョン別情報・手順
4. **コードブロック** - 5行以内の実例

#### レシピルール

| 項目 | 制限 | 理由 |
|------|------|------|
| 説明文 | 1行まで | 高速スキャン |
| コード例 | 5行以内 | トークン節約 |
| テーブル | 積極活用 | 構造化 |
| 段落 | 最小限 | 簡潔性 |

### 3. 変換例

**Before（説明的）**:
```markdown
slog パッケージは構造化ログを提供し、Handler インターフェースを通じて
さまざまなログ出力先に対応しています...
```

**After（レシピ形式）**:
```markdown
## ログ出力

| ❌ 避ける | ✅ 使う | 理由 |
|----------|---------|------|
| `log.Println("msg", id)` | `slog.Info("msg", "id", id)` | 構造化 |

**Why**: 検索・集計が容易（Go 1.21+）
```

### 4. 同期

更新後に `./claude-code/sync.sh from-local` でリポジトリに反映。

## チェック項目

- [ ] 新機能・非推奨の確認
- [ ] ベストプラクティスの変更
- [ ] ツール更新（フォーマッター、リンター等）
- [ ] バージョン番号の明記

## レシピフォーマット詳細

### クイックリファレンステーブル

```markdown
## エラー処理

| パターン | コード |
|---------|--------|
| 基本 | `if err != nil { return err }` |
| ラップ | `fmt.Errorf("msg: %w", err)` |
| 判定 | `errors.Is(err, ErrNotFound)` |
```

### よくあるミステーブル

```markdown
| ❌ 避ける | ✅ 使う | 理由 |
|----------|---------|------|
| `any` | `unknown` + 型ガード | 型安全性 |
| `as T` | `isT(data)` | ランタイム安全 |
```

### バージョン別（箇条書き）

```markdown
**1.25 (2025/08)**:
- `testing/synctest` - 並行テスト
- Flight Recorder - 軽量トレース
```

## 注意事項

- 破壊的変更は必ずユーザー確認
- 更新前に git で管理されていることを確認
- トークン使用量が現在の50%以下になることを目指す
