# 型安全性の原則

型安全性はバグ早期発見・保守性向上の最重要原則。

---

## any / interface{} 禁止

| 言語 | ❌ 禁止 | ✅ 推奨 |
|------|---------|---------|
| TypeScript | `any` | `unknown` + 型ガード<br>ジェネリクス / Union 型 |
| Go | `interface{}` | ジェネリクス<br>`str, ok := data.(string)` パターン |

---

## 型アサーション / as 最小化

| 言語 | ❌ 禁止 | ✅ 推奨 |
|------|---------|---------|
| TypeScript | `data as User` | 型ガード関数で安全にナローイング |
| Go | `data.(string)` | `str, ok := data.(string)` |

---

## null 安全性

| 言語 | 設定 | 使用方法 |
|------|------|----------|
| TypeScript | `strictNullChecks` 必須 | `?.` / `??` を活用<br>❌ Non-null assertion `!` 禁止 |
| Go | - | ポインタの nil チェック徹底<br>Early return で nil チェック明示 |

---

## 型推論の活用

冗長な型注釈を避け、型推論に任せる（戻り値の型が明確な場合）。

---

## やむを得ず any/as を使用する場合

| 条件 | 内容 |
|------|------|
| 許可条件 | 外部ライブラリの型定義が不完全<br>既存コードとの一時的な互換性 |
| **必須ルール** | **コメントで理由を明記**<br>使用範囲を最小限に<br>TODO コメントで将来削除計画を示す |
