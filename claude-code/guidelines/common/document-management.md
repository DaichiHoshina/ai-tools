# 📝 ドキュメント管理 - レシピ作成ガイド（Claude向け）

## 基本方針

### 保存するもの

| 対象 | 例 | 理由 |
|------|----|----|
| 具体的コードパターン | コピペ可能な形式 | 即座に活用可能 |
| 最新バージョンの書き方 | ❌/✅比較付き | 古い書き方との違いが明確 |
| プロジェクト固有ルール | 命名規則、構成 | チーム標準 |
| よくあるミスと対策 | トラブルシューティング | 再発防止 |

### 保存しないもの

| 対象 | 理由 |
|------|------|
| 公式ドキュメントのコピー | 変更されるため |
| API リファレンス全体 | 膨大で管理困難 |
| 言語仕様書 | 公式を参照すべき |

## フォーマット優先順位

1. **テーブル** - 比較・一覧に最適
2. **箇条書き** - 列挙・手順に最適
3. **コードブロック** - 5行以内の例
4. **段落** - 最終手段（1行まで）

## ❌/✅ ルール

### 基本形式

```markdown
## セクション名

| ❌ 避ける | ✅ 使う | 理由 |
|----------|---------|------|
| 古い/悪い書き方 | 新しい/良い書き方 | 1行の理由 |
```

### 具体例

**❌ 悪い例（説明的）**:
```markdown
slog パッケージは構造化ログを提供し、Handler インターフェースを通じて
さまざまなログ出力先に対応しています。context を渡すことで...
```

**✅ 良い例（レシピ形式）**:
```markdown
## ログ出力

| ❌ 避ける | ✅ 使う | 理由 |
|----------|---------|------|
| `log.Println("msg", id)` | `slog.Info("msg", "id", id)` | 構造化 |

**Why**: 検索・集計が容易（Go 1.21+）
```

## コード例のルール

| 項目 | 制限 | 理由 |
|------|------|------|
| 行数 | 5行以内 | トークン節約 |
| 説明 | 1行まで | 簡潔性 |
| コメント | 最小限 | コードで語る |

## よくあるミスの記録パターン

### パターン1: テーブル形式

```markdown
## React 状態管理

| ❌ 間違い | ✅ 正解 | 理由 |
|----------|---------|------|
| props drilling（5階層） | Context API | 結合度低減 |
```

### パターン2: Before/After

```markdown
❌ **Before**:
\`\`\`tsx
<Parent data={data}>
  <Child1 data={data}>
    <Child2 data={data} />
\`\`\`

✅ **After**:
\`\`\`tsx
const DataContext = createContext<Data>(null);
const data = useContext(DataContext);
\`\`\`

**Why**: 保守性向上
```

## プロジェクト固有ドキュメント

### ディレクトリ構成

- `~/.claude/templates/` - グローバルテンプレート
- `プロジェクト/.claude/` - プロジェクト固有
  - `design/` - 設計書
  - `specs/` - 仕様書
  - `history/` - PR履歴

### 命名規則

| ファイル種別 | 形式 | 例 |
|------------|------|-----|
| 仕様書 | `kebab-case.md` | `user-auth.md` |
| PR履歴 | `PR<番号>.md` | `PR123.md` |
| 設計書 | `YYYY-MM-DD-<名前>.md` | `2025-01-02-api-design.md` |

## セキュリティ

| ❌ 記載禁止 | ✅ 代替 |
|-----------|--------|
| API キー | プレースホルダー `__API_KEY__` |
| パスワード | 例: `your-password` |
| 実URLアドレス | 例: `https://example.com` |

## 作成タイミング

| ドキュメント種別 | タイミング |
|----------------|-----------|
| 仕様書 | 実装前 or 実装完了時 |
| PR履歴 | PR作成時 |
| 設計書 | 設計時 or 大きな変更時 |
| レシピ | パターン発見時 |

## チェックリスト

作成時の確認項目:

- [ ] テーブルを優先的に使用
- [ ] コード例は5行以内
- [ ] 説明は1行まで
- [ ] ❌/✅形式で比較
- [ ] バージョン番号を明記
- [ ] センシティブ情報なし
