#!/bin/bash
# Codex Stop Hook - Task Completion Notification
# Plays notification sound when task is completed

set -euo pipefail

# Read JSON input
INPUT=$(cat)

# Notification sound file
NOTIFICATION_FILE="$HOME/notification.mp3"

if [ -f "$NOTIFICATION_FILE" ]; then
  # Play notification sound (background)
  afplay "$NOTIFICATION_FILE" &

  cat <<EOF
{
  "systemMessage": "ðŸ”” Task completed. Notification sound played."
}
EOF
else
  # Notification file not found
  cat <<EOF
{
  "systemMessage": "âš ï¸  Notification file not found at ~/notification.mp3"
}
EOF
fi
